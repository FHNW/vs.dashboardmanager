<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="vs.dashboardmanager">
  <body>
    <div metal:fill-slot="main">

        <h1 i18n:translate="label_portlet_assignments">Portlet assignments in dashboard(s)</h1>
        <label i18:translate="label_userid">User</label>:
        <span tal:replace="request/userid | nothing" />
        <br/>
        <label i18:translate="label_group">Group</label>:
        <span tal:replace="request/group | nothing" />

        <dl>
            <tal:loop repeat="row view/get_assignments">
                <dt tal:content="row/userid" />
                <dd>
                    <span tal:condition="not: row/hasDashboard" i18n:translate="label_user_has_no_dashboard">
                        no dashboard
                    </span>

                    <table class="listing" tal:condition="row/hasDashboard">
                        <thead>
                            <tr>
                                <tal:loop repeat="row2 row/dashboards">
                                    <th tal:content="row2/manager" />
                                </tal:loop>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <tal:loop repeat="row2 row/dashboards">
                                    <td valign="top">
                                        <div tal:repeat="d row2/portlets">
                                            <span tal:content="d/portlet_id" />
                                            <span tal:content="d/parameters | nothing" />
                                        </div>
                                    </td>
                                </tal:loop>
                            </tr>
                        </tbody>
                    </table>
                </dd>
            </tal:loop>
        </dl>
    </div>
  </body>
</html>
